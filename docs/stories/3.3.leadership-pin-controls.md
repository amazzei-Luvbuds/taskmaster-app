# Story 3.3: Leadership Pin Controls

## Status
Draft

## Story
**As a** leadership user,
**I want** advanced controls for managing global pins,
**so that** I can set priorities, add context, and manage global pins effectively.

## Acceptance Criteria

1. Global pin creation shows priority selection (1-10 scale)
2. Optional reason/context field for global pins
3. Bulk pin management interface for leadership
4. Global pin override controls (remove any global pin)
5. Visual indicators show who created global pins
6. Global pin metadata editing capabilities

## Tasks / Subtasks

- [ ] Global Pin Creation Dialog (AC: 1, 2)
  - [ ] Create modal/dialog for global pin creation
  - [ ] Implement priority slider/selector (1-10)
  - [ ] Add optional reason text field
  - [ ] Include pin duration options (permanent/temporary)
  - [ ] Add confirmation and preview

- [ ] Bulk Management Interface (AC: 3)
  - [ ] Create global pin management page/panel
  - [ ] List all global pins with metadata
  - [ ] Implement bulk actions (remove, update priority)
  - [ ] Add filtering and sorting capabilities
  - [ ] Include search functionality

- [ ] Pin Override Controls (AC: 4)
  - [ ] Add "Remove Global Pin" option for leadership
  - [ ] Show confirmation dialog for pin removal
  - [ ] Include context about pin creator
  - [ ] Log override actions for audit

- [ ] Metadata Display (AC: 5, 6)
  - [ ] Show pin creator information
  - [ ] Display pin creation date and reason
  - [ ] Add edit controls for pin metadata
  - [ ] Include pin priority and impact indicators

- [ ] Advanced Pin Features (AC: 6)
  - [ ] In-place editing for pin priority
  - [ ] Reason/context editing capabilities
  - [ ] Pin expiration date management
  - [ ] Pin impact assessment tools

## Dev Notes

### Relevant Source Tree
- `src/components/GlobalPinDialog.tsx` - Pin creation modal
- `src/components/GlobalPinManager.tsx` - Bulk management interface
- `src/pages/LeadershipPage.tsx` - Leadership dashboard integration
- `src/hooks/useGlobalPinActions.ts` - Global pin management hooks

### Global Pin Creation Dialog
```typescript
interface GlobalPinDialogProps {
  taskId: string;
  isOpen: boolean;
  onClose: () => void;
  onSubmit: (pinData: GlobalPinData) => void;
}

interface GlobalPinData {
  priority: number;
  reason?: string;
  expiresAt?: Date;
  notifyUsers?: boolean;
}

export const GlobalPinDialog: React.FC<GlobalPinDialogProps> = ({
  taskId,
  isOpen,
  onClose,
  onSubmit
}) => {
  // Dialog implementation with form validation
};
```

### Bulk Management Interface
```typescript
interface GlobalPinManagerProps {
  filters?: PinFilters;
  onPinUpdate: (pinId: string, updates: Partial<GlobalPin>) => void;
  onPinRemove: (pinId: string) => void;
}

interface PinFilters {
  creator?: string;
  priority?: number[];
  dateRange?: [Date, Date];
  department?: string;
}

export const GlobalPinManager: React.FC<GlobalPinManagerProps> = ({
  filters,
  onPinUpdate,
  onPinRemove
}) => {
  // Management interface implementation
};
```

### Pin Metadata Components
```typescript
const GlobalPinMetadata: React.FC<{ pin: GlobalPin }> = ({ pin }) => {
  return (
    <div className="pin-metadata">
      <div className="pin-creator">
        <UserAvatar userId={pin.pinnedBy} />
        <span>Pinned by {pin.pinnedBy}</span>
      </div>
      <div className="pin-details">
        <Badge variant="priority">{pin.priority}/10</Badge>
        <span>{formatDate(pin.pinnedAt)}</span>
      </div>
      {pin.reason && (
        <div className="pin-reason">
          <Text variant="caption">{pin.reason}</Text>
        </div>
      )}
    </div>
  );
};
```

### Priority Scale Design
```typescript
const PRIORITY_LABELS = {
  1: 'Low Priority',
  2: 'Low Priority',
  3: 'Minor Priority',
  4: 'Minor Priority',
  5: 'Normal Priority',
  6: 'Normal Priority',
  7: 'High Priority',
  8: 'High Priority',
  9: 'Critical Priority',
  10: 'Urgent Priority'
};

const PRIORITY_COLORS = {
  low: 'bg-green-100 text-green-800',
  normal: 'bg-blue-100 text-blue-800',
  high: 'bg-orange-100 text-orange-800',
  critical: 'bg-red-100 text-red-800'
};
```

### Leadership Dashboard Integration
```typescript
const LeadershipPinSection: React.FC = () => {
  const { globalPins, updateGlobalPin, removeGlobalPin } = useGlobalPins();

  return (
    <div className="leadership-pin-section">
      <h3>Global Pin Management</h3>
      <div className="pin-stats">
        <StatCard label="Active Global Pins" value={globalPins.length} />
        <StatCard label="High Priority" value={highPriorityCount} />
      </div>
      <GlobalPinManager
        onPinUpdate={updateGlobalPin}
        onPinRemove={removeGlobalPin}
      />
    </div>
  );
};
```

### Testing Standards
- Leadership role permission testing
- Global pin creation flow testing
- Bulk operations testing
- Metadata editing testing
- UI responsiveness testing
- Edge case handling (invalid priorities, etc.)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-20 | 1.0 | Initial story creation | Winston (Architect) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*This section will be populated by QA Agent after implementation review*